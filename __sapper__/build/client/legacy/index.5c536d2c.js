import{J as e,_ as n,a as s,b as a,c as t,i as c,s as o,d as r,S as i,f as u,q as l,g as m,h as f,r as h,j as d,k as v,l as g,u as y,v as p,K as U,w as C,L as E,M as k,z as w,t as T,p as $,E as b,B as j,N as D,O as S,P as _,D as B}from"./chunk.c5aeee34.js";import{H as I,i as O,f as A}from"./chunk.d78456dc.js";var L=e.document;function M(e,n,s){var a=Object.create(e);return a.message=n[s],a}function N(e){var n,s,a,t,c=e.message;return{c:function(){n=u("li"),s=l(c),this.h()},l:function(e){n=m(e,"LI",{class:!0},!1);var a=f(n);s=h(a,c),a.forEach(d),this.h()},h:function(){v(n,"class","svelte-y27m3y")},m:function(e,a){g(e,n,a),y(n,s),t=!0},p:function(e,n){t&&!e.messages||c===(c=n.message)||p(s,c)},i:function(e){t||(_(function(){a||(a=U(n,A,{},!0)),a.run(1)}),t=!0)},o:function(e){a||(a=U(n,A,{},!1)),a.run(0),t=!1},d:function(e){e&&(d(n),a&&a.end())}}}function P(e){for(var n,s,a,t,c,o,r,i,U,_,O,A,P,H,V,W,Y,q,z,F,J,K,R,G,Q=1==e.numUsersConnected?"is":"are",X=1==e.numUsersConnected?"user":"users",Z=new I({props:{text:"Chat App"}}),ee=e.messages,ne=[],se=0;se<ee.length;se+=1)ne[se]=N(M(e,ee,se));var ae=function(e){return $(ne[e],1,1,function(){ne[e]=null})};return{c:function(){n=u("meta"),s=C(),a=u("body"),t=u("div"),Z.$$.fragment.c(),c=C(),o=u("div"),r=u("ul");for(var m=0;m<ne.length;m+=1)ne[m].c();i=C(),U=u("form"),_=u("input"),O=C(),A=u("button"),P=l("Send"),H=C(),V=u("p"),W=l("There "),Y=l(Q),q=C(),z=l(e.numUsersConnected),F=C(),J=l(X),K=l(" currently chatting!"),this.h()},l:function(u){n=m(u,"META",{name:!0,content:!0,class:!0},!1),f(n).forEach(d),s=h(u,"\n\n\n\n\n\n"),a=m(u,"BODY",{class:!0},!1);var l=f(a);t=m(l,"DIV",{class:!0},!1);var v=f(t);Z.$$.fragment.l(v),c=h(v,"\n    "),o=m(v,"DIV",{id:!0,class:!0},!1);var g=f(o);r=m(g,"UL",{id:!0,class:!0},!1);for(var y=f(r),p=0;p<ne.length;p+=1)ne[p].l(y);y.forEach(d),g.forEach(d),i=h(v,"\n    "),U=m(v,"FORM",{action:!0,class:!0},!1);var C=f(U);_=m(C,"INPUT",{id:!0,autocomplete:!0,placeholder:!0,class:!0},!1),f(_).forEach(d),O=h(C,"\n      "),A=m(C,"BUTTON",{class:!0},!1);var E=f(A);P=h(E,"Send"),E.forEach(d),C.forEach(d),H=h(v,"\n\t\t"),V=m(v,"P",{id:!0,class:!0},!1);var k=f(V);W=h(k,"There "),Y=h(k,Q),q=h(k," "),z=h(k,e.numUsersConnected),F=h(k," "),J=h(k,X),K=h(k," currently chatting!"),k.forEach(d),v.forEach(d),l.forEach(d),this.h()},h:function(){L.title="Chat App",v(n,"name","viewport"),v(n,"content","width=device-width, initial-scale=1.0"),v(n,"class","svelte-y27m3y"),v(r,"id","messages"),v(r,"class","svelte-y27m3y"),v(o,"id","chatWindow"),v(o,"class","svelte-y27m3y"),v(_,"id","m"),v(_,"autocomplete","off"),v(_,"placeholder",x),v(_,"class","svelte-y27m3y"),v(A,"class","svelte-y27m3y"),v(U,"action",""),v(U,"class","svelte-y27m3y"),v(V,"id","numUsers"),v(V,"class","svelte-y27m3y"),v(t,"class","main svelte-y27m3y"),v(a,"class","svelte-y27m3y"),G=[E(window,"unload",e.emitUserDisconnect),E(_,"input",e.input_input_handler),E(A,"click",k(e.handleSubmit))]},m:function(u,l){y(L.head,n),g(u,s,l),g(u,a,l),y(a,t),w(Z,t,null),y(t,c),y(t,o),y(o,r);for(var m=0;m<ne.length;m+=1)ne[m].m(r,null);y(t,i),y(t,U),y(U,_),_.value=e.message,y(U,O),y(U,A),y(A,P),y(t,H),y(t,V),y(V,W),y(V,Y),y(V,q),y(V,z),y(V,F),y(V,J),y(V,K),R=!0},p:function(e,n){if(e.messages){ee=n.messages;for(var s=0;s<ee.length;s+=1){var a=M(n,ee,s);ne[s]?(ne[s].p(e,a),T(ne[s],1)):(ne[s]=N(a),ne[s].c(),T(ne[s],1),ne[s].m(r,null))}for(B(),s=ee.length;s<ne.length;s+=1)ae(s);b()}e.message&&_.value!==n.message&&(_.value=n.message),R&&!e.numUsersConnected||Q===(Q=1==n.numUsersConnected?"is":"are")||p(Y,Q),R&&!e.numUsersConnected||p(z,n.numUsersConnected),R&&!e.numUsersConnected||X===(X=1==n.numUsersConnected?"user":"users")||p(J,X)},i:function(e){if(!R){T(Z.$$.fragment,e);for(var n=0;n<ee.length;n+=1)T(ne[n]);R=!0}},o:function(e){$(Z.$$.fragment,e),ne=ne.filter(Boolean);for(var n=0;n<ne.length;n+=1)$(ne[n]);R=!1},d:function(e){d(n),e&&(d(s),d(a)),j(Z),D(ne,e),S(G)}}}var x="Type your message here...";function H(){var e=document.getElementById("chatWindow");setTimeout(function(){e.scrollTop=e.scrollHeight},0)}function V(e,n,s){var a=O(),t=["You have joined the chat. Use '/nick your_nickname' to set your nickname!"],c="",o="Anonymous",r=0;return a.on("message",function(e){s("messages",t=t.concat(e)),H()}),a.on("user joined",function(e){var n=e.message,a=e.numUsers;s("messages",t=t.concat(n)),s("numUsersConnected",r=a),H()}),a.on("user left",function(e){s("numUsersConnected",r=e),H()}),{messages:t,message:c,numUsersConnected:r,emitUserDisconnect:function(){a.emit("user disconnect",o)},handleSubmit:function(){if(s("message",c=c.trim()),""!=c){var e="".concat(o,": ").concat(c);if("/nick"==c.slice(0,5)){var n=c.slice(6);e="Server: ".concat(o," changed their nickname to ").concat(n),o=n}s("messages",t=t.concat(e)),a.emit("message",e),H(),s("message",c="")}},input_input_handler:function(){c=this.value,s("message",c)}}}export default(function(e){function u(e){var n;return s(this,u),n=a(this,t(u).call(this)),c(r(n),e,V,P,o,[]),n}return n(u,i),u}());
//# sourceMappingURL=index.5c536d2c.js.map
